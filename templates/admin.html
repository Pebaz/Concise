<link rel=stylesheet href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.4/css/bulma.min.css" />
<link rel=stylesheet href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" crossorigin="anonymous">

<script>
	function deleteSelected()
	{
		var cbs = document.getElementsByName('delete-me');
		for (var i = 0; i < cbs.length; i++)
		{
			if (cbs[i].checked)
			{
				var id = cbs[i].value;

				fetch("https://www.jsonstore.io/e9e6153838f3d04ea2843901197e19bcaf72f63a97ec0e26d88c5d1178ac22af/urls/" + id, {
					method: "DELETE",
					headers: {
						"Content-Type": "application/json"
					},
					redirect: "follow"
				}).then(response => {
					window.location.reload();
				});
			}
		}
	}
</script>

<section class=section>
	<h1 class=title>PBZ.URL Admin Interface</h1>
	<h2 class=subtitle>View stored URLs and decide which ones to keep or discard.</h1>

	<button class=button onclick="deleteSelected()">Delete Selected</button>
</section>


<section class=section style="overflow-x: auto">
	<table class="table">
		<thead>
			<tr>
				<th>Delete</th>
				<th>ID</th>
				<th>URL</th>
			</tr>
		</thead>
		<tbody id=table-body>
			{% for id in json %}
			<tr>
				<th>
					<label class=checkbox>
						<input type=checkbox name=delete-me value="{{ id }}">
					</label>
				</th>
				<td>{{ id }}</td>
				<td>
					<a href="{{ id }}">{{ json[id] }}</a>
				</td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
</section>